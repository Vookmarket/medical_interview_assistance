# 動物病院問診アプリケーション 要件定義書

## 1. 概要
動物病院の来院前または来院時に、飼い主がペットの症状（徴候）を簡易的に入力し、それを問診票として医師に共有するためのWebアプリケーションを開発する。チェックボックス形式で複数の徴候を選択すると、入力内容に応じた問診内容を自動で生成し、クリップボードにコピーできる機能を提供する。

## 2. 背景と目的
### 背景
- 動物病院での診察前に、飼い主から症状を正確に聞き取るのは時間がかかり、伝達ミスが生じる可能性がある。
- 飼い主自身が症状を把握し切れていないと、症状を正確に伝えるのが難しいことがある。

### 目的
- アプリケーションを通じて、飼い主がチェックボックスを選択するだけで主要な症状を整理できる。
- 問診票を自動生成して、医師に確実かつ効率的に共有できるようになる。

## 3. 対象ユーザー
- 動物病院を利用する飼い主
- 症状を確認・整理する動物看護師や受付担当

## 4. 機能要件

### 4.1 徴候入力（チェックボックス）
1. **複数選択可能なチェックボックス一覧**  
   - 嘔吐、下痢、食欲不振、沈鬱、元気消失などの主な症状をチェックボックスで列挙する。  
   - 一部の症状は、さらに詳細情報（例：下痢の場合、血便／水様便／粘膜便）を補足できるようにする。

### 4.2 問診票の自動生成
1. **動的テキスト生成**  
   - 選択された症状をもとに、下部テキストボックスに自動で問診内容を生成する。  
   - 例：  

     ```
     ## 徴候
     - 下痢 (血便 / 水様便 / 粘膜便)
     - 嘔吐
     - 食欲不振
     - 沈鬱
     - 元気消失
     ```

### 4.3 クリップボードコピー
1. **コピー機能**  
   - 問診票として生成されたテキストを、ワンクリックでクリップボードにコピーできるボタンを設置する。

### 4.4 画面レイアウト要件
1. **画面構成**  
   - 上部またはサイドに症状チェックボックス群を一覧表示する領域。  
   - チェックボックス選択に応じた問診票が動的に更新されるテキスト表示領域。  
   - クリップボードコピー用のボタン。  
2. **レスポンシブ対応**（最小要件）  
   - スマートフォン、タブレット、PCでレイアウトが大きく崩れないようにする。

## 5. 非機能要件
1. **パフォーマンス**  
   - 小規模なアプリケーションであるため、高負荷にはならない想定。Reactのレンダリングがストレスなく行える程度を目指す。  
2. **セキュリティ**  
   - クライアントサイドのみで動作し、機密情報は扱わないため、大きなセキュリティ要件は想定しない。  
   - 不特定多数が利用する可能性を考慮し、XSS対策など一般的なWebアプリケーションのセキュリティ対策を施す。
3. **拡張性**  
   - 将来的に症状項目を追加・編集できるよう、チェックボックスのリストは設定ファイルやDBなどで管理することを検討する。

## 6. 使用技術
- **フロントエンド**: React（v16以降を想定）
- **言語**: JavaScript（TypeScriptへの移行も検討可能）
- **UIフレームワーク**: 必須ではないが、必要に応じてMaterial-UIなどを利用可
- **ビルドツール**: Create React App など

## 7. 必要なコンポーネント

1. **App コンポーネント**  
   - アプリケーション全体を統括するコンテナ。
2. **SymptomsCheckboxList コンポーネント**  
   - 症状一覧を表示し、チェックボックスで複数選択可能。
3. **SymptomsDetail コンポーネント**（詳細オプション用）  
   - 下痢の種類など詳細を選択可能にする。
4. **QuestionnaireDisplay コンポーネント**  
   - 選択された症状をもとに問診票を表示。
5. **ClipboardButton コンポーネント**  
   - 生成された問診票をクリップボードにコピー。
6. **Layout / Page コンポーネント**（任意）  
   - レイアウト管理用。

## 8. インタラクションフロー（簡易）
1. `App`コンポーネントが読み込まれ、チェックボックスリストと問診票表示部分、コピー用ボタンを配置。
2. ユーザーがチェックボックスをクリックし、症状を選択または解除。
3. `SymptomsCheckboxList`で状態が更新され、上位コンポーネントへ伝搬。
4. `App`から`QuestionnaireDisplay`へ選択された症状を渡し、問診票を自動生成して表示。
5. `ClipboardButton`で問診票をクリップボードにコピー。

## 9. テストと検証
1. **単体テスト**  
   - 各コンポーネント単位で、チェックボックスの選択／解除やテキスト生成が動作するかをテスト。
2. **結合テスト**  
   - `SymptomsCheckboxList`と`QuestionnaireDisplay`が連動し、正しくテキストが生成されるかを検証。
3. **UIテスト**  
   - レイアウト崩れがないか、スマートフォン・タブレットでのレスポンシブ対応を確認。
